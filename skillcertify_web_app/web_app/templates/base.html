<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}SkillCertify{% endblock %}</title>
    <script>
        tailwind.config = {
        darkMode: 'class'  // âœ… This enables manual theme control
        };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white font-sans antialiased">

<!--  <header class="flex justify-between items-center p-4">
    <h1 class="text-2xl font-bold">SkillCertify</h1>
    <button id="theme-toggle" class="bg-gray-200 dark:bg-gray-800 text-black dark:text-white p-2 rounded">
      <svg id="theme-icon" class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"></svg>
    </button>
  </header>-->

{% include 'components/header.html' %}

<main class="container mx-auto p-4 md:p-6">
    {% block content %}{% endblock %}
</main>

{% include 'components/footer.html' %}

{% block scripts %}
<script>
  const toggle = document.getElementById('theme-toggle');
  const html = document.documentElement;

  // Explicitly sets theme to dark or light
  function setTheme(theme) {
    localStorage.setItem('theme', theme);
    if (theme === 'dark') {
      html.classList.add('dark');
    } else {
      html.classList.remove('dark');
    }
    updateIcon()
  }

  // Updates the icon depending on mode
  function updateIcon() {
    const isDark = html.classList.contains('dark');
    const icon = document.getElementById('theme-icon');
    icon.innerHTML = isDark
      ? `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
         d="M12 3v1m0 16v1m9-9h-1M4 12H3m16.24-6.24l-.71.71M6.34 17.66l-.71.71m12.02 0l-.71-.71M6.34 6.34l-.71-.71" />`
      : `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
         d="M12 3a9 9 0 00-9 9h9V3z" />`;
  }

  // Button toggle logic
  toggle.addEventListener('click', () => {
    const isCurrentlyDark = html.classList.contains('dark');
    const newTheme = isCurrentlyDark ? 'light' : 'dark';
    console.log('Toggling theme to:', newTheme);
    setTheme(newTheme);
    updateIcon();
  });

  // Load theme from localStorage
  document.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('theme') || 'light';
    console.log('Loaded saved theme:', savedTheme);
    setTheme(savedTheme);
    updateIcon();
  });
</script>

{% endblock %}
</body>
</html>
